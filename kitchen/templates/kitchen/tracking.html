{% extends 'kitchen/base.html' %} {% block content %}

<div class="max-w-7xl mx-auto pb-12 animate-fade-in-up">
 <!-- Header Section -->
 <div
  class="flex flex-col md:flex-row md:items-end justify-between gap-6 mb-10">
  <div>
   <h2
    class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-slate-900 to-slate-600 tracking-tight">
    Order Tracking
   </h2>
   <p class="text-slate-500 mt-2 text-lg font-medium">
    Operations Overview & History
   </p>
  </div>

  <!-- Modern Segmented Controls for Filter -->
  <div
   class="bg-white p-1.5 rounded-2xl shadow-sm border border-slate-200 inline-flex flex-wrap gap-1">
   <a
    href="?status="
    class="px-5 py-2.5 rounded-xl text-sm font-bold transition-all duration-200 {% if not request.GET.status %}bg-slate-900 text-white shadow-md{% else %}text-slate-600 hover:bg-slate-50 hover:text-slate-900{% endif %}">
    All Orders
   </a>
   <a
    href="?status=CONFIRMED"
    class="px-5 py-2.5 rounded-xl text-sm font-bold transition-all duration-200 {% if request.GET.status == 'CONFIRMED' %}bg-blue-600 text-white shadow-md shadow-blue-200{% else %}text-slate-600 hover:bg-blue-50 hover:text-blue-700{% endif %}">
    Confirmed
   </a>
   <a
    href="?status=COMPLETED"
    class="px-5 py-2.5 rounded-xl text-sm font-bold transition-all duration-200 {% if request.GET.status == 'COMPLETED' %}bg-emerald-600 text-white shadow-md shadow-emerald-200{% else %}text-slate-600 hover:bg-emerald-50 hover:text-emerald-700{% endif %}">
    Completed
   </a>
   <a
    href="?status=CANCELLED"
    class="px-5 py-2.5 rounded-xl text-sm font-bold transition-all duration-200 {% if request.GET.status == 'CANCELLED' %}bg-red-600 text-white shadow-md shadow-red-200{% else %}text-slate-600 hover:bg-red-50 hover:text-red-700{% endif %}">
    Cancelled
   </a>
  </div>
 </div>

 <!-- Data Table Container -->
 <div
  class="bg-white rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden">
  <div class="overflow-x-auto">
   <table class="min-w-full divide-y divide-slate-100">
    <thead>
     <tr class="bg-slate-50/50">
      <th
       scope="col"
       class="px-8 py-5 text-left text-xs font-bold text-slate-400 uppercase tracking-wider">
       Order ID
      </th>
      <th
       scope="col"
       class="px-8 py-5 text-left text-xs font-bold text-slate-400 uppercase tracking-wider">
       Date & Time
      </th>
      <th
       scope="col"
       class="px-8 py-5 text-left text-xs font-bold text-slate-400 uppercase tracking-wider">
       User / Location
      </th>
      <th
       scope="col"
       class="px-8 py-5 text-left text-xs font-bold text-slate-400 uppercase tracking-wider">
       Type
      </th>
      <th
       scope="col"
       class="px-8 py-5 text-left text-xs font-bold text-slate-400 uppercase tracking-wider">
       Total
      </th>
      <th
       scope="col"
       class="px-8 py-5 text-left text-xs font-bold text-slate-400 uppercase tracking-wider">
       Status
      </th>
      <th
       scope="col"
       class="px-8 py-5 text-right text-xs font-bold text-slate-400 uppercase tracking-wider">
       Action
      </th>
     </tr>
    </thead>
    <tbody class="bg-white divide-y divide-slate-50">
     {% for order in orders %}
     <tr class="group hover:bg-slate-50/80 transition-all duration-200">
      <td class="px-8 py-5 whitespace-nowrap">
       <span
        class="font-mono text-sm font-bold text-slate-900 bg-slate-100 px-2 py-1 rounded-lg"
        >#{{ order.id }}</span
       >
      </td>
      <td class="px-8 py-5 whitespace-nowrap">
       <div class="flex flex-col">
        <span class="text-sm font-bold text-slate-700"
         >{{ order.created_at|date:"M d, Y" }}</span
        >
        <span class="text-xs text-slate-400 font-medium"
         >{{ order.created_at|date:"H:i" }}</span
        >
       </div>
      </td>
      <td class="px-8 py-5 whitespace-nowrap">
       <div class="flex items-center">
        <div
         class="h-9 w-9 rounded-full bg-indigo-100 flex-shrink-0 flex items-center justify-center text-indigo-700 font-bold text-xs mr-3">
         {{ order.user.username|make_list|first|upper }}
        </div>
        <div>
         <div class="text-sm font-bold text-slate-900">
          {{ order.user.email|default:order.user.username }}
         </div>
         <div
          class="text-xs text-slate-500 font-medium flex items-center mt-0.5">
          <svg
           class="w-3 h-3 mr-1"
           fill="none"
           stroke="currentColor"
           viewBox="0 0 24 24">
           <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
           <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
          </svg>
          {{ order.location.name }}
         </div>
        </div>
       </div>
      </td>
      <td
       class="px-8 py-5 whitespace-nowrap text-sm text-slate-600 font-medium">
       {% if order.is_weekly %}
       <span
        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-purple-50 text-purple-700 border border-purple-100">
        Weekly
       </span>
       {% elif order.is_monthly %}
       <span
        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-indigo-50 text-indigo-700 border border-indigo-100">
        Monthly
       </span>
       {% else %}
       <span
        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-slate-100 text-slate-600 border border-slate-200">
        {{ order.get_plan_type_display }}
       </span>
       {% endif %}
      </td>
      <td class="px-8 py-5 whitespace-nowrap text-sm font-bold text-slate-900">
       AED {{ order.total_amount }}
      </td>
      <td class="px-8 py-5 whitespace-nowrap">
       <span
        class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold {% if order.status == 'COMPLETED' %}bg-emerald-50 text-emerald-700 border border-emerald-100 {% elif order.status == 'CANCELLED' %}bg-red-50 text-red-700 border border-red-100 {% elif order.status == 'CONFIRMED' %}bg-blue-50 text-blue-700 border border-blue-100 {% elif order.status == 'PENDING' %}bg-amber-50 text-amber-700 border border-amber-100 {% else %}bg-slate-100 text-slate-600 border border-slate-200{% endif %}">
        <span
         class="w-1.5 h-1.5 rounded-full mr-2 {% if order.status == 'COMPLETED' %}bg-emerald-500 {% elif order.status == 'CANCELLED' %}bg-red-500 {% elif order.status == 'CONFIRMED' %}bg-blue-500 {% elif order.status == 'PENDING' %}bg-amber-500 {% else %}bg-slate-400{% endif %}"></span>
        {{ order.get_status_display }}
       </span>
      </td>
      <td class="px-8 py-5 whitespace-nowrap text-right text-sm">
       <a
        href="{% url 'kitchen:order_detail' order.id %}"
        class="inline-flex items-center justify-center w-8 h-8 rounded-full bg-slate-50 text-slate-400 hover:bg-indigo-50 hover:text-indigo-600 transition-colors">
        <svg
         class="w-5 h-5"
         fill="none"
         stroke="currentColor"
         viewBox="0 0 24 24">
         <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M9 5l7 7-7 7"></path>
        </svg>
       </a>
      </td>
     </tr>
     {% empty %}
     <tr>
      <td colspan="7" class="px-6 py-24 text-center">
       <div class="flex flex-col items-center justify-center">
        <div class="bg-indigo-50 p-4 rounded-full mb-3">
         <svg
          class="w-8 h-8 text-indigo-400"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24">
          <path
           stroke-linecap="round"
           stroke-linejoin="round"
           stroke-width="2"
           d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
         </svg>
        </div>
        <h3 class="text-lg font-bold text-slate-900">No orders found</h3>
        <p class="text-slate-500 text-sm">
         Try adjusting your status filter or check back later.
        </p>
       </div>
      </td>
     </tr>
     {% endfor %}
    </tbody>
   </table>
  </div>
 </div>
</div>

<style>
 @keyframes fadeInUp {
  from {
   opacity: 0;
   transform: translateY(10px);
  }
  to {
   opacity: 1;
   transform: translateY(0);
  }
 }
 .animate-fade-in-up {
  animation: fadeInUp 0.5s ease-out forwards;
 }
</style>

{% endblock %}
